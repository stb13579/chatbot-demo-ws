<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parrot Health Chatbot</title>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "black": "#0c1015",
              "gray": {
                "50": "#f9fafa",
                "100": "#f1f1f2",
                "200": "#e6e7e9",
                "300": "#d2d4d7",
                "400": "#a9adb2",
                "500": "#797f88",
                "600": "#4d5560",
                "700": "#2e3744",
                "800": "#19202b",
                "900": "#141a23"
              },
              "teal": {
                "50": "#f7fafa",
                "100": "#deebeb",
                "200": "#c1d9d9",
                "300": "#a0c5c5",
                "400": "#75abab",
                "500": "#4f9494",
                "600": "#267b7b",
                "700": "#086060",
                "800": "#075050",
                "900": "#064242"
              },
              "cyan": {
                "50": "#f8fafb",
                "100": "#e1ebed",
                "200": "#d4e2e5",
                "300": "#c5d8dc",
                "400": "#99bac1",
                "500": "#85adb5",
                "600": "#6e9da6",
                "700": "#498490",
                "800": "#286e7c",
                "900": "#095665"
              },
              "blue": {
                "50": "#f4f6f8",
                "100": "#d7dfe6",
                "200": "#bac7d5",
                "300": "#9aaec2",
                "400": "#7d96b0",
                "500": "#6382a0",
                "600": "#496d90",
                "700": "#2a537d",
                "800": "#164471",
                "900": "#093664"
              },
              "purple": {
                "50": "#f7f6fa",
                "100": "#e1ddea",
                "200": "#cbc4db",
                "300": "#aca0c5",
                "400": "#9787b6",
                "500": "#7b68a3",
                "600": "#695396",
                "700": "#583f8a",
                "800": "#4a2f80",
                "900": "#371a73"
              },
              "pink": {
                "50": "#faf6f8",
                "100": "#ebdde4",
                "200": "#dac3cf",
                "300": "#c5a0b2",
                "400": "#b6879f",
                "500": "#a36986",
                "600": "#965375",
                "700": "#873a61",
                "800": "#77204b",
                "900": "#610835"
              },
              "red": {
                "50": "#faf6f6",
                "100": "#eadddd",
                "200": "#d9c0c0",
                "300": "#c39d9d",
                "400": "#b78989",
                "500": "#a76e6e",
                "600": "#985757",
                "700": "#893d3d",
                "800": "#7e2b2b",
                "900": "#6a0b0b"
              },
              "orange": {
                "50": "#fbfaf9",
                "100": "#f1ece8",
                "200": "#e1d7cd",
                "300": "#cab9a8",
                "400": "#b69e87",
                "500": "#a48669",
                "600": "#926f4c",
                "700": "#7e552b",
                "800": "#6d3e10",
                "900": "#5c3208"
              },
              "yellow": {
                "50": "#fefefd",
                "100": "#f9f9f6",
                "200": "#efede4",
                "300": "#e2dfd0",
                "400": "#d1ccb4",
                "500": "#b1a87f",
                "600": "#92874c",
                "700": "#776820",
                "800": "#5b4e08",
                "900": "#4c4006"
              },
              "green": {
                "50": "#fafcfb",
                "100": "#e2ede8",
                "200": "#c4dbcf",
                "300": "#a2c6b4",
                "400": "#7fb198",
                "500": "#5c9c7c",
                "600": "#36845d",
                "700": "#0a6a3a",
                "800": "#07572f",
                "900": "#064727"
              },
              "primary": {
                "50": "#f4f8f7",
                "100": "#d3e4de",
                "200": "#accdc2",
                "300": "#7eb09f",
                "400": "#63a08c",
                "500": "#3f8a71",
                "600": "#20775a",
                "700": "#086143",
                "800": "#075239",
                "900": "#053b29"
              }
            }
          }
        }
      }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-50 flex items-center justify-center min-h-screen text-gray-900">
    <div id="root"></div>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">
      function ChatApp() {
        const [messages, setMessages] = React.useState([]);
        const [input, setInput] = React.useState('');
        const wsRef = React.useRef(null);

        React.useEffect(() => {
          const protocol = location.protocol === 'https:' ? 'wss' : 'ws';
          wsRef.current = new WebSocket(`${protocol}://${location.host}`);
          wsRef.current.onmessage = (event) => {
            setMessages((msgs) => [...msgs, { from: 'bot', text: event.data }]);
          };
          return () => wsRef.current.close();
        }, []);

        const send = () => {
          if (!input) return;
          wsRef.current.send(input);
          setMessages((msgs) => [...msgs, { from: 'user', text: input }]);
          setInput('');
        };

            return (
          <div className="bg-white shadow-md rounded-lg p-6 w-full max-w-md">
            <h1 className="text-2xl font-bold text-primary-700 mb-4 text-center">Parrot Health Chatbot</h1>
            <img src="parrot.svg" alt="Colorful cartoon parrot standing upright with a cheerful expression, set against a plain background" className="h-16 mx-auto mb-2" />
            <div className="h-64 overflow-y-auto mb-4 border border-gray-200 p-2 rounded">
              {messages.length === 0 ? (
                <p className="text-gray-500 text-center">Your conversation will appear here.</p>
              ) : (
                messages.map((m, idx) => (
                  <div key={idx} className={m.from === 'user' ? 'text-right mb-1' : 'text-left mb-1'}>
                    <span className={m.from === 'user' ? 'text-primary-700' : 'text-gray-700'}>
                      {m.from === 'user' ? 'You: ' : ''}{m.text}
                    </span>
                  </div>
                ))
              )}
            </div>
            <div className="flex">
              <input
                className="flex-grow border border-gray-300 rounded-l px-2 py-1 focus:outline-none"
                placeholder="Type your question here"
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyDown={(e) => { if (e.key === 'Enter') send(); }}
              />
              <button
                className="bg-primary-600 text-white px-4 py-1 rounded-r hover:bg-primary-700"
                onClick={send}
              >
                Send
              </button>
              <text>You ask questions, we repeat them back to you! </text>
            </div>
          </div>
        );
      }

      ReactDOM.render(<ChatApp />, document.getElementById('root'));
    </script>
  </body>
</html>
